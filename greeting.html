<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday, My Love!</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="card">
        <h1 class="animated-text">Bangaara you have brightened the world from...</h1>
        
        <div class="time-alive-container">
            <div class="timer-label">We've spent a total of...</div>
            <div id="time-alive-timer">
                <div class="timer-unit"><span class="unit" id="days">0000</span><span class="label">Days</span></div>
                <div class="timer-unit"><span class="unit" id="hours">00</span><span class="label">Hrs</span></div>
                <div class="timer-unit"><span class="unit" id="minutes">00</span><span class="label">Mins</span></div>
                <div class="timer-unit"><span class="unit" id="seconds">00</span><span class="label">Secs</span></div>
            </div>
        </div>
        
        <p class="message">
            To the most wonderful person in my life, every day spent with you is a cherished gift. Thank you for filling my world with so much love and laughter. I hope you know how deeply you are loved. Happy Birthday!
        </p>

        <div class="photo-gallery animated-media">
            <img src="placeholder_1.jpg" alt="A cherished memory 1" class="photo-slot-1" id="photo1" />
            <img src="placeholder_2.jpg" alt="A cherished memory 2" class="photo-slot-2" id="photo2" />
            <img src="placeholder_3.jpg" alt="A cherished memory 3" class="photo-slot-3" id="photo3" />
            <img src="placeholder_4.jpg" alt="A cherished memory 4" class="photo-slot-4" id="photo4" />
            
            <img src="placeholder_5.jpg" alt="A cherished memory 5" class="photo-slot-5" id="photo5" />
            <img src="placeholder_6.jpg" alt="A cherished memory 6" class="photo-slot-6" id="photo6" />
            <img src="placeholder_7.jpg" alt="A cherished memory 7" class="photo-slot-7" id="photo7" />
            <img src="placeholder_8.jpg" alt="A cherished memory 8" class="photo-slot-8" id="photo8" />
        </div>
        
        <p class="signature">- Always Yours</p>

        <div class="secret-tab">
            <h3 class="tab-title">Unlock the Secret Message!</h3>
            <p class="hint">***Hint: The password will be a celebration of you and me, think wisely.</p>
            
            <div id="passwordArea">
                <input type="password" id="secretPassword" placeholder="Enter Secret Code">
                <button onclick="checkPassword()">Unlock</button>
            </div>

            <div id="secretContent" class="secret-content" style="max-height: 0; padding: 0;">
                <p style="padding-top: 15px; color: #d81b60; font-size: 1.2em; font-weight: 600;">
                    My heart is yours forever and a day! Thank you for the best years of my life. I promise to keep making new memories with you, one cherished photo at a time. I love you!
                </p>
            </div>
        </div>

    </div>

    <div class="heart-container" id="heartContainer"></div>

    <span class="confetti">üíñ</span>
    <span class="balloon">üéà</span>
    <span class="confetti-2">üéÅ</span>

    <script>
        // Set your custom date here (e.g., date when your relationship started)
        const START_DATE = new Date('2020-03-24T00:00:00'); // Example Date: March 24, 2020

        // --- CORE FUNCTIONS ---

        // 1. Time Alive Counter
        function initTimer() {
            const timer = document.getElementById('time-alive-timer');
            const units = { 
                days: document.getElementById('days'), 
                hours: document.getElementById('hours'), 
                minutes: document.getElementById('minutes'), 
                seconds: document.getElementById('seconds') 
            };

            function updateTimer() {
                const now = new Date();
                const diff = now - START_DATE;

                const s = Math.floor(diff / 1000);
                const m = Math.floor(s / 60);
                const h = Math.floor(m / 60);
                const d = Math.floor(h / 24);

                units.seconds.textContent = (s % 60).toString().padStart(2, '0');
                units.minutes.textContent = (m % 60).toString().padStart(2, '0');
                units.hours.textContent = (h % 24).toString().padStart(2, '0');
                units.days.textContent = d.toLocaleString(); // Use localeString for thousands separator
            }

            updateTimer();
            setInterval(updateTimer, 1000);
        }

        // 2. Load Photos from Admin LocalStorage
        function loadAdminPhotos() {
            for (let i = 1; i <= 8; i++) {
                const tempLink = localStorage.getItem(`temp_photo${i}`);
                const photoElement = document.getElementById(`photo${i}`);
                
                if (photoElement && tempLink) {
                    photoElement.src = tempLink;
                } 
            }
        }
        
        // 3. Secret Message Unlock
        function checkPassword() {
            // !! SET YOUR SECRET CODE HERE !!
            const SECRET_CODE = "mar24"; 
            
            const input = document.getElementById('secretPassword').value.trim().toLowerCase();
            const content = document.getElementById('secretContent');
            const passwordArea = document.getElementById('passwordArea');
            
            if (input === SECRET_CODE) {
                // Show content by setting max-height to a large value
                content.style.maxHeight = content.scrollHeight + "px"; 
                content.style.padding = "15px 0";
                
                // Hide the password area
                passwordArea.style.display = 'none';
                
                // Start a special animation burst for the reveal
                startHeartBurst(document.querySelector('.secret-tab'));

            } else {
                alert("Incorrect code. Try the hint!");
            }
        }
        
        // --- ANIMATION/UX FUNCTIONS (For completeness) ---
        
        function startHeartBurst(element) {
            const rect = element.getBoundingClientRect();
            const container = document.body;
            
            for(let i = 0; i < 15; i++) { // Generate 15 hearts for a burst
                const heart = document.createElement('span');
                heart.classList.add('burst-heart');
                heart.textContent = 'üíó'; // Use a different heart emoji
                
                // Position heart at the center of the element that triggered the burst
                const startX = rect.left + rect.width / 2;
                const startY = rect.top + rect.height / 2;
                
                heart.style.left = `${startX}px`;
                heart.style.top = `${startY}px`;
                
                // Random travel distance and rotation
                const travelX = (Math.random() - 0.5) * 400; // -200 to +200
                const travelY = (Math.random() - 1) * 300 - 100; // Always fly mostly upwards
                const duration = 1.5 + Math.random(); // 1.5s to 2.5s duration
                
                heart.style.setProperty('--travel-x', `${travelX}px`);
                heart.style.setProperty('--travel-y', `${travelY}px`);
                heart.style.animationDuration = `${duration}s`;
                heart.style.fontSize = `${1 + Math.random() * 1.5}em`;
                
                container.appendChild(heart);
                
                // Clean up the element after the animation finishes
                setTimeout(() => heart.remove(), duration * 1000);
            }
        }
        
        function createFloatingHearts() {
            const container = document.getElementById('heartContainer');
            const numHearts = 30; // Number of floating hearts
            
            for (let i = 0; i < numHearts; i++) {
                const heart = document.createElement('span');
                heart.classList.add('floating-heart');
                
                // Choose a random heart emoji
                const hearts = ['üíñ', 'üíï', 'üíò', 'üíû', 'üíó'];
                heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                
                // Randomize starting position, size, and speed
                heart.style.left = `${Math.random() * 100}vw`;
                heart.style.fontSize = `${0.8 + Math.random() * 1.5}em`;
                heart.style.animationDelay = `${Math.random() * 50}s`;
                heart.style.animationDuration = `${10 + Math.random() * 10}s`; // Slower speed
                heart.style.opacity = `${0.2 + Math.random() * 0.6}`;
                
                container.appendChild(heart);
            }
        }


        // --- INITIALIZATION ---
        window.onload = function() {
            // Check if user is logged in as 'user' before showing the page
            if (localStorage.getItem('userRole') !== 'user') {
                // Allow direct access if no userRole is set, or redirect to login
                if (!localStorage.getItem('loggedInUser')) {
                    // console.log("No login state found, proceeding to page.");
                } else {
                    alert("Access Denied. Redirecting to login.");
                    window.location.href = 'login.html';
                }
            }
            
            initTimer();
            loadAdminPhotos(); // IMPORTANT: This loads the 8 images
            createFloatingHearts();
        };

    </script>
</body>
</html>
